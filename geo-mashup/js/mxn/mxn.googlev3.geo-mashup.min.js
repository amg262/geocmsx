mxn.addProxyMethods(mxn.Mapstraction,["enableGeoMashupExtras","setMapTypes"],false);mxn.register("googlev3",{Mapstraction:{enableGeoMashupExtras:function(){var a=this;a.markerAdded.addHandler(function(c,d,b){if(b.marker.draggable){b.marker.dragend=new mxn.Event("dragend",b.marker);google.maps.event.addListener(b.marker.proprietary_marker,"dragend",function(e){b.marker.dragend.fire({location:new mxn.LatLonPoint(e.latLng.lat(),e.latLng.lng())})})}});google.maps.event.addListener(a.maps.googlev3,"center_changed",function(){a.endPan.fire()})},setMapTypes:function(b){var d=this.maps[this.api];var c=[];var a;if(typeof b!=="object"){b=[b]}for(a=0;a<b.length;a+=1){switch(b[a]){case mxn.Mapstraction.ROAD:c.push(google.maps.MapTypeId.ROADMAP);break;case mxn.Mapstraction.SATELLITE:c.push(google.maps.MapTypeId.SATELLITE);break;case mxn.Mapstraction.HYBRID:c.push(google.maps.MapTypeId.HYBRID);break;case mxn.Mapstraction.PHYSICAL:c.push(google.maps.MapTypeId.TERRAIN);break}}d.setOptions({mapTypeControlOptions:{mapTypeIds:c}})}},Marker:{openBubble:function(){var a=this;if(!this.map.hasOwnProperty("geo_mashup_infowindow")||this.map.geo_mashup_infowindow===null){this.map.geo_mashup_infowindow=new google.maps.InfoWindow();google.maps.event.addListener(this.map.geo_mashup_infowindow,"closeclick",function(b){a.closeBubble()});if(!this.proprietary_marker.map){google.maps.event.addListenerOnce(this.map.geo_mashup_infowindow,"domready",function(){a.map.geo_mashup_infowindow.close();a.map.geo_mashup_infowindow.setPosition(a.proprietary_marker.getPosition());a.map.geo_mashup_infowindow.open(a.map)})}}this.openInfoBubble.fire({marker:this});this.map.geo_mashup_infowindow.setContent(this.infoBubble);this.map.geo_mashup_infowindow.open(this.map,this.proprietary_marker)},closeBubble:function(){if(this.map.hasOwnProperty("geo_mashup_infowindow")&&this.map.geo_mashup_infowindow!==null){this.map.geo_mashup_infowindow.close();this.closeInfoBubble.fire({marker:this})}}}});